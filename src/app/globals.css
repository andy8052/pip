@import "tailwindcss";
@import "../design-system/tokens.css";

/*
 * ==========================================================================
 * GLOBAL STYLES — PIP DESIGN SYSTEM INTEGRATION
 * ==========================================================================
 *
 * This file bridges the design token layer with Tailwind CSS v4 and sets
 * up global defaults for the application.
 *
 * Layer order:
 * 1. Tailwind base/reset
 * 2. Design tokens (custom properties)
 * 3. Tailwind theme mapping (below)
 * 4. Global element styles
 * ==========================================================================
 */

/* --------------------------------------------------------------------------
 * TAILWIND v4 THEME — Map design tokens to Tailwind's theme system
 * This enables using tokens via utility classes like bg-background, text-foreground
 * -------------------------------------------------------------------------- */
@theme inline {
  /* Core semantic colors */
  --color-background: var(--bg-base);
  --color-foreground: var(--fg-default);
  --color-muted: var(--fg-muted);
  --color-subtle: var(--fg-subtle);

  /* Surface colors */
  --color-surface: var(--bg-raised);
  --color-overlay: var(--bg-overlay);

  /* Border */
  --color-border: var(--border-default);

  /* Accent */
  --color-accent: var(--accent-default);
  --color-accent-hover: var(--accent-hover);

  /* Fonts */
  --font-sans: var(--font-family-sans);
  --font-mono: var(--font-family-mono);
}

/* --------------------------------------------------------------------------
 * GLOBAL ELEMENT STYLES
 *
 * Minimal resets and defaults. We lean on Tailwind's preflight for most
 * resets, but set body/document-level styles here for the dark theme.
 * -------------------------------------------------------------------------- */

body {
  background: var(--bg-base);
  color: var(--fg-default);
  font-family: var(--font-family-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Scrollbar styling for dark theme (Webkit browsers) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-base);
}

::-webkit-scrollbar-thumb {
  background: var(--color-neutral-700);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-neutral-600);
}

/* Selection styling */
::selection {
  background: var(--accent-muted);
  color: var(--fg-default);
}

/* Focus visible global — ensures consistent focus ring everywhere */
:focus-visible {
  outline: var(--ring-width) solid var(--ring-color);
  outline-offset: var(--ring-offset);
}

/* Remove focus outline for mouse users, keep for keyboard */
:focus:not(:focus-visible) {
  outline: none;
}

/* Smooth scrolling with reduced-motion respect */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
